(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[399],{383:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>N});var s=t(7876),r=t(9053),c=t(1777),n=t(4232);let l=e=>{let{className:a,type:t,onEnter:r,placeholder:c}=e;return(0,s.jsx)("input",{className:a,type:t,value:"text"===t?e.value:void 0,checked:"checkbox"===t?e.isChecked:void 0,onChange:function(a){"text"===t&&"newValue"in e?e.newValue(a.target.value):"checkbox"===t&&"onChange"in e&&e.onChange()},onKeyDown:function(e){"Enter"===e.key&&r&&r()},placeholder:c})};var i=t(2471);let d=(0,i.Z0)({name:"value",initialState:"",reducers:{setValue:(e,a)=>a.payload,clearValue:()=>""}}),{setValue:o,clearValue:h}=d.actions;d.reducer;let u={items:[]},p=(0,i.Z0)({name:"search",initialState:"",reducers:{searchData:(e,a)=>a.payload,clearData:()=>""}}),{searchData:m,clearData:g}=p.actions;p.reducer;let x=e=>({showLoader:()=>e({type:"SET_LOADER"}),toggleLoader:()=>e({type:"TOGGLE_LOADER"}),setPagination:a=>e({type:"SET_PAGINATION",payload:a}),clearPagination:()=>e({type:"CLEAR_PAGINATION",payload:0}),createShouldThrow:()=>e({type:"SET_SHOULDTHROW"}),toggleShouldThrow:()=>e({type:"TOGGLE_SHOULDTHROW"}),setValue:a=>e(o(a)),clearValue:()=>e(h()),setPage:a=>e({type:"SET_PAGE",payload:a}),addSelect:a=>e({type:"ADD_SELECT",payload:a}),removeSelect:a=>e({type:"REMOVE_SELECT",payload:a}),clearSelect:()=>e({type:"CLEAR_SELECT",payload:u}),toggleTheme:()=>e({type:"TOGGLE_THEME"}),searchData:a=>e(m(a)),clearData:()=>e(g())});var _=t(8987),w=t(1948),v=t(7802);let j=()=>{var e,a;let t=(0,c.d4)(e=>e.searchReducer),i=(0,c.d4)(e=>e.pageReducer),{data:d,isLoading:o,isError:h}=(0,v.OP)({search:t,page:i}),u=(0,c.wA)(),p=(0,c.d4)(e=>e.selectReducer.items),{removeSelect:m,addSelect:g,clearSelect:j,setPagination:y}=x(u),E=(0,r.Zp)(),N=null!=(a=null==d||null==(e=d.results)?void 0:e.map((e,a)=>1===i?{...e,id:a+1}:{...e,id:Number("".concat(i-1,"1"))+a+1}))?a:[];return((0,n.useEffect)(()=>{d?y(Math.ceil(d.count/10)):y(0)},[d,y]),h)?(0,s.jsx)("div",{children:"Возникла ошибка попробуйте позже снова направить запрос"}):o?(0,s.jsx)(w.A,{}):(0,s.jsxs)(s.Fragment,{children:[N.map(e=>{let a=p.some(a=>a.id===e.id);return(0,s.jsxs)("div",{className:"wramper_contentbox",children:[(0,s.jsx)(l,{className:"checkbox",type:"checkbox",isChecked:a,onChange:()=>{a?m(e):g(e)}}),(0,s.jsxs)("div",{className:"content",onClick:()=>(e=>{e&&E("detail/".concat("".concat(e)))})(e.id),children:[(0,s.jsx)("div",{className:"content_name",children:e.name}),(0,s.jsx)("div",{className:"content_disc",children:"Height: ".concat(e.height,", Mass: ").concat(e.mass)})]})]},e.id)}),p.length>0&&(0,s.jsxs)("div",{className:"flyout",children:[(0,s.jsxs)("p",{className:"item_select",children:[p.length," items are selected"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(_.A,{className:"button-clear_select",text:"Unselect all",onClick:j}),p.length>0&&(0,s.jsx)("a",{href:"data:text/csv;charset=utf-8,".concat(encodeURIComponent(p.map(e=>"".concat(e.name,",").concat(e.height,",/detail/").concat(e.id)).join("\n"))),download:"".concat(p.length,"_items.csv"),className:"download_select",children:"Download CSV"})]})]})]})},y=()=>{if((0,c.d4)(e=>e.shouldThrowReducer.shouldThrow))throw Error("Error inside to Content");let e=(0,c.wA)(),{toggleShouldThrow:a}=x(e);return(0,s.jsxs)("div",{children:[(0,s.jsx)("main",{className:"results",children:(0,s.jsx)(j,{})}),(0,s.jsx)(_.A,{className:"create error",onClick:a,text:"break the universe"}),(0,s.jsx)(_.A,{className:"reset_cache",onClick:()=>{e(v.WP.util.resetApiState()),e(v.t_.util.resetApiState())},text:"reset cache and reload data"})]})},E=()=>{let e=(0,r.Zp)(),a=(0,c.wA)(),t=(0,c.d4)(e=>e.paginationReducer.pagination),{setPage:n}=x(a);if(t>1){let a=Array.from({length:t},(e,a)=>a+1);return(0,s.jsx)("div",{className:"pagination",children:a.map(a=>(0,s.jsx)(_.A,{className:"pagination_item",text:String(a),onClick:()=>{n(a),e("/?page=".concat(a))}},a))})}},N=()=>{let{id:e}=(0,r.g)(),a=(0,c.d4)(e=>e.switcherReducer.isDark);return(0,s.jsxs)("div",{className:a?"main-wrapper dark":"main-wrapper",children:[(0,s.jsxs)("div",{className:"main-left",children:[(0,s.jsx)(y,{}),(0,s.jsx)(E,{})]}),(0,s.jsx)("div",{className:"main-right ".concat(e?"":"hidden"),children:(0,s.jsx)(r.sv,{})})]})}},1948:(e,a,t)=>{"use strict";t.d(a,{A:()=>c});var s=t(7876);let r={src:"/_next/static/media/loader.43f5f18c.gif",height:281,width:498,blurWidth:0,blurHeight:0},c=()=>(0,s.jsx)("div",{className:"loader",children:(0,s.jsx)("img",{className:"loader_img",src:r,alt:"loading..."})})},3038:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/Main",function(){return t(383)}])},7802:(e,a,t)=>{"use strict";t.d(a,{OP:()=>i,W:()=>o,WP:()=>n,t_:()=>l});var s=t(245),r=t(6118);let c={alternative:"https://swapi.py4e.com/api/people/",withImage:"https://akabab.github.io/starwars-api/api/"},n=(0,s.xP)({reducerPath:"starwarsApi",baseQuery:(0,r.cw)({baseUrl:c.alternative}),keepUnusedDataFor:120,endpoints:e=>({getPersonStarWars:e.query({query:e=>{let{search:a,page:t}=e,s=new URLSearchParams;a&&s.append("search",a),t&&s.append("page",String(t));let r=s.toString();return r?"?".concat(r):"/"}})})}),l=(0,s.xP)({reducerPath:"starwarsDetailApi",baseQuery:(0,r.cw)({baseUrl:c.withImage}),keepUnusedDataFor:120,endpoints:e=>({getDetailPerson:e.query({query:e=>{let{id:a}=e;return"/id/".concat(a,".json")}})})}),{useGetPersonStarWarsQuery:i,useLazyGetPersonStarWarsQuery:d}=n,{useGetDetailPersonQuery:o,useLazyGetDetailPersonQuery:h}=l},8987:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});var s=t(7876);let r=e=>{let{className:a,text:t,onClick:r}=e;return(0,s.jsx)("button",{className:a,onClick:r,children:t})}}},e=>{e.O(0,[351,245,636,593,792],()=>e(e.s=3038)),_N_E=e.O()}]);